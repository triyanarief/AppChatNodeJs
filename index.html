<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <style>
  form {
    position: absolute;
    bottom: 0px;
    width: 100%;
    background: grey;
    padding: 20px;
  }

  #text_box {
    float: left;
    width: 40%;
    height: 30px;
    border: none;
    margin-left: 10px;
  }

  #nama_user {
    float: left;
    width: 20%;
    height: 30px;
    border: none;
  }

  button {
    float: left;
    width: 20%;
    height: 33px;
    margin-left: 10px;
  }

  li:nth-child(even) {
    background-color: green;
    color: white;
    opacity: 0.5;
    margin-top: 5px;
    border-top-right-radius: 2%;
    border-bottom-right-radius: 2%;
    border-top-left-radius: 2%;
    border-bottom-left-radius: 2%;
    font-size: 18px;
    font-family: sans-serif;
    width : auto;
  }

  li:nth-child(odd) {
    background-color: blue;
    color: white;
    opacity: 0.5;
    margin-top: 5px;
    border-radius: 70%;
    border-top-right-radius: 2%;
    border-bottom-right-radius: 2%;
    border-top-left-radius: 2%;
    border-bottom-left-radius: 2%;
    font-size: 18px;
    font-family: monospace;
    width: auto;
  }

  li {
    padding: 5px;
  }

  </style>
  <title>Simple Chat Apps</title>
</head>
<body>
<ul id="messages"></ul>


<form>
  <input type="text" id="nama_user" placeholder="User Name">
  <input type="text" id="text_box" placeholder="Your Messages"> <button>SEND</button>
</form>


<script src="/socket.io/socket.io.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
  var socket = io();
  var username = '';

  $('form').submit(function(){
    username = $('#nama_user').val();
    socket.emit('newMessages', username + ':  ' + $('#text_box').val());
    $('#text_box').val();
    return false;
  });

  // untuk menampilkan pada client side
  socket.on('newMessages', function(msg) {
    $('#messages').append($('<li>').text(msg +'\n || Pada : '+ Date()));
    // $('#messages').append($('<li>').text(Date()));
  });
</script>
</body>
</html>
